<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="/style/main.css">
    <script src="/socket.io/socket.io.js"></script>

</head>
<style>
    .center {
        margin: 0px;
        position: relative;
        display: block;
        left: 50%;
        top: 45%;
        text-align: center;
        min-width: 50%;
        transform: translate(-50%, -50%)
    }

    button {
        transition: all 0.2s;
        border: none;
        font-size: 1.1em;
        padding: 10px;
        border-radius: 100px;
        margin: 8px;
    }

    button:hover {
        transform: scale(1.2);
    }

    .bb {
        color: orange;
        font-size: 45em;
    }

    h1 {
        font-size: 5em;
        margin: 8px;
    }

    h2 {
        font-size: 3em;
        margin: 6px;
    }

    h3 {
        font-size: 2em;
        margin: 4px;
    }

    body {
        position: fixed;
        background: #eee;
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        font-family: 微軟正黑體, Arial, Helvetica, sans-serif
    }

    .slide {

        position: fixed;
        width: 100%;
        height: 100%;
    }

    .back {
        z-index: -1;
    }

    .main {
        background-color: orange;
    }
</style>

<body>

    <div id="app">

        <transition-group name="list">
            <div class="slide" key="slides" v-if="slides">
                <span @click="go()">
                    <fbtn>關閉</fbtn>
                </span>
                <slides></slides>
            </div>
            <template v-if="!slides">
                <span @click="slides=true" key="backtoSlides">
                    <fbtn>比賽規則</fbtn>
                </span>

                <div class="slide" :key="'round'+round.no" v-if="page=='round'">
                    <div class="center">
                        <h1>{{round.title}}</h1>
                        <p v-if="round.usebutton">請準備好搶答按鈕</p>
                        <p v-else>此局不用搶答按鈕</p>
                        <button v-if="hasPrevRound" @click="prevRound()">到前一輪</button>
                        <button class="main" @click="roundStart()">開始</button>
                        <button v-if="hasNextRound" @click="nextRound()">跳過此輪</button>
                    </div>
                </div>



                <div class="slide" key="problem" v-if="page=='problem'||page=='racestart'">
                    <div class="center">


                        <h3>
                            第{{problem.no+1}}題
                            <cir w="96px" bc="black" c="white">{{problem.score}}分</cir>
                        </h3>

                        <h1>{{problem.title}}</h1>
                        <h3>{{problem.content}}</h3>
                        <template v-for="(c, i) in problem.choice">
                            <h2 style="display:inline-block; margin:32px">
                                <cir w="64px" c="white" :bc="['red','orange','green','blue'][i]||'black'">
                                    {{c.value}}
                                </cir>
                                {{c.content}}
                            </h2>
                        </template>
                        <hr>
                        <template v-if="round.usebutton">
                            <button class="main" @click="problemStart(3000)">搶答倒數</button>
                            <button :class="{main:races.length>0}" @click="page='answer'">答案揭曉</button>

                            <div v-if="racestart==0">
                                <h3 v-for="(r,i) in races">
                                    <cir w="48px" :bc="i==0?'orange':'lightGray'">
                                        {{r.no}}
                                    </cir>
                                </h3>
                            </div>
                        </template>

                        <template v-else>

                            <button class="main" @click="problemStart(0)" v-if="racestart==-1">開始作答</button>

                            <template v-if="racestart==0">
                                <h3>
                                    <cir w="128px" bc="orange">{{races.length}} / {{players.length}}</cir> 已作答
                                </h3>
                                <button :class="{main:races.length>0}" @click="page='answer'">答案揭曉</button>
                            </template>

                        </template>
                        <button @click="goRound()">返回場次</button>
                    </div>
                </div>

                <div class="slide" key="answer" v-if="page=='answer'">
                    <div class="center">

                        <h3>
                            {{problemc.title}} {{problemc.content}}
                        </h3>
                        <h1>正解
                            <cir v-if="problemc.answer.value!=''" w="128px" bc="green" c="white">{{problemc.answer.value}}</cir>
                        </h1>
                        <h2>{{problemc.content}}</h2>
                        {{answer}}
                        <button class="main" v-if="hasNextProblem" @click="nextProblem()">下一題</button>
                        <button class="main" v-else-if="hasNextRound" @click="nextRound()">下一輪</button>
                        <button @click="goRound()">返回場次</button>
                    </div>
                </div>

                <div class="slide back" key="background">
                    <cir class="center" w="1400px" bc="white"></cir>
                </div>
                <div class="slide back" key="background">
                    <div class="center" v-if="page=='problem'||page=='racestart'">
                        <h1 v-if="racestart>0" class="bb">{{racestart/1000}}</h1>
                        <h1 v-if="racestart==0" class="bb" style="color:lightGreen">GO</h1>
                    </div>
                </div>
            </template>

        </transition-group>
    </div>

    <script src=" /dist/play.js "></script>
    <script>

    </script>
</body>

</html>